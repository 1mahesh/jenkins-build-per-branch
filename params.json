{"name":"Jenkins \"Build Per Branch\"","body":"Jenkins Build Per Branch\r\n========================\r\n\r\nThe code in this repo lets you automatically generate Jenkins jobs for new branches in a specified repository, using templates to create the jobs.\r\n\r\nUsing it is as easy as getting the set of jobs for your master branch working as you want them to.  Then create a new job that is in charge of creating new builds for each new branch in jenkins using the code in this repo.  That job monitors github for new branches that we don't already have jobs for.\r\n\r\nIt also automatically cleans up old feature branches that have been fully merged into another branch.\r\n\r\nInstallation\r\n------------\r\n\r\nIt has the following plugin requirements in Jenkins:\r\n\r\n* [Jenkins Git Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin) - currently called the \"Jenkins GIT plugin\" in the UI as of plugin version 1.1.17\r\n* [Gradle Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin) - currently called the \"Hudson Groovy builder\" in the UI as of plugin version 1.12\r\n* the git command line app also must be installed (this is already a requirement of the Jenkins Git Plugin), and it must be configured with credentials (likely an SSH key) that has authorization rights to the git repository\r\n\r\n\r\nConventions\r\n-----------\r\n\r\nIt is expected that there will be 1 or more \"template\" jobs that will be replicated for each new branch that is created.  In most workflows, this will likely be the jobs for the `master` branch.\r\n\r\nThe job names are expected to be of the format:\r\n\r\n    <templateJobPrefix>-<jobName>-<templateBranchName>\r\n\r\nWhere:\r\n\r\n* `templateJobPrefix` is probably the name of the git repository, ex: `myproject`\r\n* `jobName` describes what Jenkins is actually doing with the job, ex: `runTests`\r\n* `templateBranchName` is the branch that's being used as a template for the feature branch jobs, ex: `master`\r\n\r\nSo you could have 3 jobs that are dependent on each other to run, ex:\r\n\r\n* MyProject-RunTests-master\r\n* MyProject-BuildWar-master\r\n* MyProject-DeployApp-master\r\n\r\nIf you created a new feature branch (ex: `newfeature`) and pushed it to the main git repo, it would create these jobs in Jenkins:\r\n\r\n* MyProject-RunTests-newfeature\r\n* MyProject-BuildWar-newfeature\r\n* MyProject-DeployApp-newfeature\r\n\r\nOnce `newfeature` was tested, accepted, and merged into master, the sync job would then delete those jobs on the next run.\r\n\r\nWhat Kinds of Worflows Need a Build Per Branch?\r\n-----------------------------------------------\r\n\r\nThis can be very useful if your team is using a workflow like [Github Flow](http://scottchacon.com/2011/08/31/github-flow.html).\r\n\r\nIn this workflow:\r\n\r\n* the `master` branch is always deployable\r\n* New work is _always_ done in a feature branch (i.e. `ted/my_fancy_feature`) and never committed directly to `master`  \r\n* When a feature is finished and ready, a pull request is made against master that is reviewed and tested by at least one other developer \r\n* After a pull request is approved, the feature branch is merged to `master` and the feature branch is then deleted\r\n* master should then be deployed as soon as possible\r\n\r\nThe advantages to this model are:\r\n\r\n* all code is seen (and tested) by at least one other person\r\n* Feature branches are very short-lived (mostly a day or two) and rarely get out of date making the majority of merges trivial\r\n* new features are quickly available to end users, and can be quickly fixed if there is some sort of issue\r\n\r\nOne disadvantage is that with multiple, short-lived branches, manually creating CI to confirm that all tests continue to pass becomes far too much overhead.  It must be automated for this model to work and be trusted.  \"Jenkins Build Per Branch\" is the answer to that problem.\r\n\r\n\r\nKnown Limitations\r\n-----------------\r\n\r\nThe current version has these known limitations:\r\n\r\n* branches created from old code that don't fit the way the template currently works will fail.\r\n* \r\n\r\n\r\nPotential Future Enhancements\r\n-----------------------------\r\n\r\n* allow a git repo to hold your job definitions, it would then be a submodule of the repo under test.  As the jenkins configuration changes to meet the needs of the repo under test, the job definition repo could be updated appropriately.  This would tie a particular SHA in the job definition repo to the current branch so Jenkins always has the right job definitions for building.\r\n\r\n* make this into a plugin with a new jenkins \"job type\" that simplifies things down to the subset of what we actually want","tagline":"Auto-create Jenkins build jobs for new feature branches","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}